- name: Run IBM MQ container
  ansible.builtin.command: >
    docker run -d 
    --name {{ ibmmq_container_name }}
    -p {{ ibmmq_ports[0] }}
    -p {{ ibmmq_ports[1] }}
    -v {{ ibmmq_volume_path }}:/mnt/mqm
    -e LICENSE=accept
    -e MQ_QMGR_NAME={{ ibmmq_mq_name }}
    -e MQ_ADMIN_PASSWORD={{ ibmmq_admin_password }}
    {{ ibmmq_image }}
  become: true
  register: container_result
  failed_when: container_result.rc != 0 and 'already in use' not in container_result.stderr
