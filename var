- name: Debug SELinux installation for Python 3
  block:
    - name: Check installed SELinux packages
      ansible.builtin.raw: yum list installed | grep libselinux
      register: selinux_packages
      become: true

    - name: Show SELinux packages installed
      ansible.builtin.debug:
        var: selinux_packages.stdout

    - name: Test Python 3 SELinux module
      ansible.builtin.raw: python3 -c "import selinux; print('SELinux Python3 OK')"
      register: selinux_python3_check
      ignore_errors: true
      become: true

    - name: Show Python 3 SELinux import result
      ansible.builtin.debug:
        var: selinux_python3_check.stdout
