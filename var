# 1. Vérifier que le conteneur tourne bien
docker ps | grep ibm-mq

# 2. Vérifier la configuration actuelle
docker exec ibm-mq runmqsc QM1 << EOF
DISPLAY QMGR CHLAUTH CONNAUTH
DISPLAY CHANNEL(DEV.APP.SVRCONN)
DISPLAY CHLAUTH(DEV.APP.SVRCONN)
END
EOF


# Arrêter et supprimer
docker stop ibm-mq
docker rm ibm-mq

# Recréer SANS MQ_APP_PASSWORD
docker run -d \
  --name ibm-mq \
  --restart unless-stopped \
  -p 1414:1414 \
  -p 9443:9443 \
  -v /mnt/mqdata:/var/mqm \
  -e LICENSE=accept \
  -e MQ_QMGR_NAME=QM1 \
  -e MQ_ADMIN_PASSWORD=admin \
  -e MQ_DEV=true \
  ibmcom/mq:9.2.4.0-r1-amd64

# Attendre 30 secondes
sleep 30

# Vérifier les logs
docker logs ibm-mq | tail -20
