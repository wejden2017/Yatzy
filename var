# Assure l’existence du fichier (ne change pas le owner)
- name: Ensure script log file exists
  ansible.builtin.file:
    path: "{{ tar_deploy_path }}/install_dba_scripts_aws.log"
    state: touch
  become: true
  tags: [update_database]

# Vide le contenu du fichier (préféré)
- name: Truncate script log file
  ansible.builtin.shell: |
    truncate -s 0 "{{ tar_deploy_path }}/install_dba_scripts_aws.log" || :
  become: true
  changed_when: false
  tags: [update_database]
