  - name: Parse Tomcat versions from page
    set_fact:
      tomcat_versions: >-
        {{ tomcat_page.content 
        | regex_findall('href="v(\d+\.\d+\.\d+)/"') 
        | list }}

  - name: Parse versions (alternative method if empty)
    set_fact:
      tomcat_versions: >-
        {{ tomcat_page.content 
        | regex_findall('v(\d+\.\d+\.\d+)') 
        | unique 
        | list }}
    when: tomcat_versions | length == 0

  - name: Extract latest Tomcat version
    set_fact:
      tomcat_version: "{{ tomcat_versions | sort | last }}"
