# 3. COPIER dans le conteneur SI il existe déjà et SI le fichier a changé
- name: Copy updated MQSC file into running container
  ansible.builtin.command: >
    docker cp /opt/ibmmq/config/config.mqsc {{ ibmmq_container_name }}:/etc/mqm/99-custom.mqsc
  when: 
    - mq_exist.stdout != ""
    - mqsc_template_updated.changed
  changed_when: true

# 4. CORRIGER les permissions dans le conteneur
- name: Set correct permissions in container
  ansible.builtin.command: >
    docker exec {{ ibmmq_container_name }}
    chown 1001:0 /etc/mqm/99-custom.mqsc
  when: mq_exist.stdout != ""
  changed_when: false
