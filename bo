# Instance 1: Frontend
module "ec2_frontend" {
  source = "./modules/ec2/instances"
  
  instance_name   = "${var.entity}-${var.application}-${var.environment}-frontend"
  instance_type   = "t3.large"
  # Autres paramètres...
  
  # Volume racine
  root_volume_size = 30
  root_volume_type = "gp2"
  root_volume_name = "${var.entity}-${var.application}-${var.environment}-frontend-root"
  
  # Volumes EBS supplémentaires
  ebs_volumes = [
    {
      device_name = "/dev/sdf"
      volume_size = 50
      volume_type = "gp2"
      name        = "${var.entity}-${var.application}-${var.environment}-frontend-data"
    }
  ]
}

# Instance 2: Backend
module "ec2_backend" {
  source = "./modules/ec2/instances"
  
  instance_name   = "${var.entity}-${var.application}-${var.environment}-backend"
  instance_type   = "t3.xlarge"
  # Autres paramètres...
  
  # Volume racine
  root_volume_size = 40
  root_volume_type = "gp2"
  root_volume_name = "${var.entity}-${var.application}-${var.environment}-backend-root"
  
  # Volumes EBS supplémentaires
  ebs_volumes = [
    {
      device_name = "/dev/sdf"
      volume_size = 100
      volume_type = "gp2"
      name        = "${var.entity}-${var.application}-${var.environment}-backend-data"
    },
    {
      device_name = "/dev/sdg"
      volume_size = 200
      volume_type = "gp2"
      name        = "${var.entity}-${var.application}-${var.environment}-backend-logs"
    }
  ]
}

# Instance 3: Database
module "ec2_database" {
  source = "./modules/ec2/instances"
  
  instance_name   = "${var.entity}-${var.application}-${var.environment}-db"
  instance_type   = "r5.large"
  # Autres paramètres...
  
  # Volume racine
  root_volume_size = 30
  root_volume_type = "gp2"
  root_volume_name = "${var.entity}-${var.application}-${var.environment}-db-root"
  
  # Volumes EBS supplémentaires
  ebs_volumes = [
    {
      device_name = "/dev/sdf"
      volume_size = 500
      volume_type = "io1"
      name        = "${var.entity}-${var.application}-${var.environment}-db-data"
    }
  ]
}

# Instance 4: Monitoring
module "ec2_monitoring" {
  source = "./modules/ec2/instances"
  
  instance_name   = "${var.entity}-${var.application}-${var.environment}-monitoring"
  instance_type   = "t3.medium"
  # Autres paramètres...
  
  # Volume racine
  root_volume_size = 30
  root_volume_type = "gp2"
  root_volume_name = "${var.entity}-${var.application}-${var.environment}-monitoring-root"
  
  # Volumes EBS supplémentaires
  ebs_volumes = [
    {
      device_name = "/dev/sdf"
      volume_size = 200
      volume_type = "gp2"
      name        = "${var.entity}-${var.application}-${var.environment}-monitoring-metrics"
    }
  ]
}

# Instance 5: Services
module "ec2_services" {
  source = "./modules/ec2/instances"
  
  instance_name   = "${var.entity}-${var.application}-${var.environment}-services"
  instance_type   = "t3.large"
  # Autres paramètres...
  
  # Volume racine
  root_volume_size = 30
  root_volume_type = "gp2"
  root_volume_name = "${var.entity}-${var.application}-${var.environment}-services-root"
  
  # Volumes EBS supplémentaires
  ebs_volumes = [
    {
      device_name = "/dev/sdf"
      volume_size = 50
      volume_type = "gp2"
      name        = "${var.entity}-${var.application}-${var.environment}-services-data"
    }
  ]
}
