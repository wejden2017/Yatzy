package_job:
  stage: package
  dependencies:
    - build_unix_job
    - build_plsql_job
  script:
    - echo "üì¶ Packaging artifacts (ignoring version/hash in filenames)"
    - mkdir -p build/${ARTIFACT_VERSION}

    # Copier le premier .war trouv√© dans cats-web
    - cp $(find cats-web/target -type f -name "*.war" | head -n 1) build/${ARTIFACT_VERSION}/cats-web.war || echo "‚ö†Ô∏è cats-web.war introuvable"

    # Copier le premier .war trouv√© dans catsbackend
    - cp $(find catsbackend/target -type f -name "*.war" | head -n 1) build/${ARTIFACT_VERSION}/cats-backend.war || echo "‚ö†Ô∏è cats-backend.war introuvable"

    # Copier les .tar
    - cp dist/cats-unix.tar build/${ARTIFACT_VERSION}/ || echo "‚ö†Ô∏è cats-unix.tar introuvable"
    - cp dist/cats-plsql.tar build/${ARTIFACT_VERSION}/ || echo "‚ö†Ô∏è cats-plsql.tar introuvable"
    - cp dist/cats-script.tar build/${ARTIFACT_VERSION}/ || echo "‚ö†Ô∏è cats-script.tar introuvable"

    # Copier les scripts d‚Äôinstallation
    - cp install_dba_scripts.ksh rollback_dba_scripts.ksh build/${ARTIFACT_VERSION}/ || echo "‚ö†Ô∏è Fichier install/rollback introuvable"

  artifacts:
    paths:
      - build/${ARTIFACT_VERSION}
    expire_in: 1 day
